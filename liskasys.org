LISKASYST

podpurny informacni system pro lesni materskou skolu Listicka

* TODOs
** new schema
*** DONE migrate attendance days + lunches to patterns
CLOSED: [2016-09-02 Fri 16:59]
*** DONE deactivate users with zero patterns
CLOSED: [2016-09-02 Fri 16:59]
*** DONE billing period CRUD
CLOSED: [2016-09-12 Mon 17:19]
*** DONE price list CRUD
CLOSED: [2016-09-12 Mon 17:19]
*** DONE generate person bills for period
CLOSED: [2016-09-17 Sat 22:13]
**** DONE prazdniny (27.12. - 31.12. + 1.7. - 31.8.) a "reditelske volno" (jednorazove)
CLOSED: [2016-09-17 Sat 12:42]
*** DONE generate daily plans for confirmed bills
CLOSED: [2016-09-17 Sat 22:08]
*** DONE migrate cancellations to daily plans (bill and plan creation for 9+10/16 be part of migration)
CLOSED: [2016-09-18 Sun 09:43]
*** DONE active person filter, child/adult filter
CLOSED: [2016-09-17 Sat 22:56]
*** DONE 5 day patterns 01111 (without Sa+Su)
CLOSED: [2016-09-18 Sun 07:24]
*** DONE bugfix: deactivate parents with inactive kids
CLOSED: [2016-09-18 Sun 08:47]
*** TODO lunch-order migration
**** vypocitat potrebnou castku do fondu obedu :person/lunch-fund
16-09-09 17:39:30 monter21.cz - Ester Havrankova {:child-id 36 :attendance-id 40, :day-of-week 1, :full-day? false, :lunch? true}
16-09-09 17:39:30 monter21.cz -                  {:child-id 36 :attendance-id 40, :day-of-week 5, :full-day? false, :lunch? true}
nemela obed 2.,5. a 9.9.
16-09-11 07:38:00 montern21.cz - Misa Nemcova       {:child-id 51 :attendance-id 60, :day-of-week 1, :full-day? true, :lunch? true}
16-09-11 07:38:00 monter21.cz - Saving :attendance {:child-id 51 :attendance-id 60, :day-of-week 2, :full-day? true, :lunch? true}
16-09-11 07:38:00 monte1.cz - Saving :attendance {:child-id 51 :attendance-id 60, :day-of-week 4, :full-day? true, :lunch? true}
16-09-11 07:38:00 monter21.cz - Saving :attendance {:child-id 51 :attendance-id 60, :day-of-week 5, :full-day? true, :lunch? true}
nemela obed 1.,2.,5.,6.,8. a 9.9.

*** TODO rewrite all code to use datomic
**** cancellations
**** lunch orders
**** lunch and cancellations views
*** deprecate old DB tables and GUIs
** TODO nahrady
*** moznost nahradit odhlasenou dochazku ve dnech, kdy neni plna kapacita
*** schvalovaci email Dance
*** emaily, když zruší omluvenku => ruší se náhrada, pokud není jiné volné místo
** form validation!!! clojure.spec
** tests service/*holiday?, time/from-dMyyyy
** odchytávání DB constraint exceptions => rozumna hlaska uživateli
** DB indexes
** edit childs at parent (the other direction)
** moznost zrusit dochazku na delsi obdobi dopredu (tlacitko dalsi> ?)
** zobrazit rodicum platby a zrusene obedy
** server side validation without exception (hash-map like on the client
** omezení počtu chybných přihlášení (+ reset)
** export dat do csv
** DONE datepickery nahradit textovym polem s validaci formatu
CLOSED: [2016-09-17 Sat 21:26]
** DONE promyslet novou koncepci / DB schema dle aktualnich pozadavku
CLOSED: [2016-09-02 Fri 15:18]
*** vse navazano na platebni obdobi
**** cenik dochazky a obedu
**** dochazka ditete
**** svatky, prazdniny, volna
**** prechod do dalsiho obdobi - nahrady, odecist odhlasene obedy (+ pozor! plati se driv nez predchozi obdobi skonci)
**** co s dlouhodobou nemoci (po 3. tydnu)?
*** obedy nezavisle na dochazce a i pro dospele
**** moznost ad-hoc obeda nejaky den
**** moznost obed zrusit (podobne jako dochazku)
*** nekteri za neco plati a za neco neplati 
*** moznost nahrad dochazky (=> obedy)
*** promyslet editaci dochazky deti na dalsi platebni obdobi => vypocet platby => oznacit zda zaplaceno
*** u osoby neco jako pattern dochazky a pattern obedu, ze ktereho nove obdobi vychazi?
*** neco flexibilnejsiho (mene cizich klicu?)
*** plovouci obedy neco jako fond plateb obedu
*** moznost upravit kazdy jednotlivy den obdobi => vyrovnani s fondy plateb, fond dochazky (zrusene dochazky)
*** sloucit deti & uzivatele => lide
*** konverze stavajicich dat
** DONE email s poctem obedu v 10 hodin uzivatelum s roli obedy
CLOSED: [2016-08-27 Sat 21:57]
** DONE svatky (28. zari!!!!)
CLOSED: [2016-09-12 Mon 13:02]
** DONE email s poctem obedu v 10 hodin uzivatelum s roli obedy
CLOSED: [2016-08-27 Sat 21:57]
** DONE nrepl server
CLOSED: [2016-08-24 Wed 13:05]
** DONE zálohování DB
CLOSED: [2016-08-24 Wed 14:13]
** DONE jidelni listek
CLOSED: [2016-05-31 Tue 13:34]
** DONE automaticka ragtime migrace
CLOSED: [2016-05-31 Tue 09:43]
** DONE přihlašování
CLOSED: [2016-05-01 Sun 15:01]
*** DONE odhlášení
CLOSED: [2016-05-01 Sun 10:31]
*** když je heslo nil => variabilní symbol dítěte => změna hesla
** DONE možnost změnit heslo
CLOSED: [2016-05-01 Sun 18:03]
** DONE role - admin, jidlo
CLOSED: [2016-05-01 Sun 15:13]
** DONE počet obědů na následující den/dny
CLOSED: [2016-05-01 Sun 22:02]
** DONE omluvenkovy formular vypsat dny dochazky na nasledujici 2 tydny a umoznit rusit
CLOSED: [2016-05-01 Sun 09:42]
*** radky s checkboxy pro jednotlive dny
*** netreba zadavat datumy
*** prihlasovani
*** zobrazeni existujicich omluvenek (a zda byl odhlasen obed)
*** pocet odhlasenych obedu
** DONE validace a ukládání omluvenkového formuláře
CLOSED: [2016-05-01 Sun 09:42]
** DONE logging middleware
CLOSED: [2016-08-11 Thu 14:44]
** DONE SSL
CLOSED: [2016-08-11 Thu 14:45]
* bugs
** DONE editace dochazky dítěte zobrazuje i so a ne
CLOSED: [2016-08-24 Wed 12:58]
** v produkci se neloguji DB chyby?? (ukladani jiz existujici omluvenky)
** DONE opravit zadavani datumu platnosti dochazky - nastavi o den mene
CLOSED: [2016-05-01 Sun 09:41]

** DONE prepnuti poctu radku na stranku datatable
CLOSED: [2016-04-28 Thu 17:32]
* improvements
** user children-count => "parent" role
** pouzivat clj-time format pro datum a cas (clj-time.jdbc, transit serializers)
** odstranit clj-brnolib
** main_hiccup - oddelit hiccup od sql/datovych vypoctu (servisni vrstva?)
** zobrazeni poctu zrusenych obedu pres sql dotaz (nyni naivni a nevykonne)

* dotazy Danka

* připomínky Danka
** DONE pristup pro kucharku s poctem obedu (normalni, vege, bez laktozy ...)
CLOSED: [2016-05-01 Sun 22:01]
** DONE barvy obedu - zluty normalni, vege zeleny, bez laktozy modry, bez obeda cerveny
CLOSED: [2016-05-01 Sun 22:02]
** DONE aktualni den - seznam deti a obedu + barvy
CLOSED: [2016-05-01 Sun 22:02]
** DONE u ditete volba typ obeda
CLOSED: [2016-05-01 Sun 09:40]
** TODO moznost zadat nahradu pro Danku - datum, dite, obed?
* obědy a platby = první verze po domluvě s Dankou
** příhlášení email+variabilní symbol
** možnost zrušit oběd do 10:00 předchozího dne (do nastavení X hodin před polednem tj. 26 hodin)
** zobrazit platbu na následující období (vypočítat obědy - odhlášené)
** kontakt na ITka: Milan Vlahovič 776700724 flexa@flexa.cz
** data
*** user
**** firstname
**** lastname
**** email
**** phone
**** passwd
**** failed-logins
**** admin?
*** child
**** firstname
**** lastname
**** variable-symbol
*** user-child
**** id
**** user-id
**** child-id
*** attendance
**** child-id
**** valid-from
**** valid-to
**** edn
{:full-days #{:tu :we :th :fr}
 :half-days #{}
 :lunch #{:tu :we :th :fr}}
|     | none / half / full   | no lunch |
|-----+----------------------+----------|
| Mon | o none o half o full | [ ]      |
| Tue | o none o half x full | [ ]      |
| Wed | o none o half x full | [ ]      |
| Thu | o none x half o full | [x]      |
| Fri | o none o half x full | [ ]      |
*** cancellation
**** child-id
**** date
**** cancel-lunch?
**** user-id

* GOALS

** zjednodusit odhlasovani obedu / zaslani omluvenky / aktualni seznam deti na dany den / pocet obedu

** usnadnit praci pri vypocitani platby na dalsi obdobi

** moznost aktualizace kontaktnich udaju 



* TECHNOLOGY CHOICES

** open source
** cloud
** h2database
** mobile-first design
** cljs (chrome+safari)
** SSL
** backups
** emails
** multilanguage (cz+en)
** local storage for offline contacts / mobile app?
